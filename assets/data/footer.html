---
regenerate:                             true 
---
{% capture cache %}

{% comment %}
 # -----------------------------------------------------------------------------
 # ~/assets/data/footer.html
 # Liquid procedure to generate HTML (data) portion of the page footer for
 # (fragmented) AJAX load
 #
 # Product/Info:
 # https://jekyll.one
 #
 # Copyright (C) 2019 Juergen Adams
 #
 # J1 Template is licensed under the MIT License.
 # See: https://github.com/jekyll-one-org/j1-template/blob/master/LICENSE
 # -----------------------------------------------------------------------------
 # Test data:
 #    {{ variable | debug }}
 # -----------------------------------------------------------------------------
{% endcomment %}

<!-- [INFO   ] [j1.assets.data.footer              ] [Footer generated: {{site.time}}] -->

{% comment %} Liquid procedures
-------------------------------------------------------------------------------- {% endcomment %}
{% capture select_color       %}themes/{{site.template.name}}/procedures/global/select_color.proc{% endcapture %}
{% capture select_icon_size   %}themes/{{site.template.name}}/procedures/global/select_icon_size.proc{% endcapture %}
{% capture about_box          %}themes/{{site.template.name}}/blocks/footer/boxes/about_box.proc{% endcapture %}
{% capture news_box           %}themes/{{site.template.name}}/blocks/footer/boxes/news_box.proc{% endcapture %}
{% capture links_box          %}themes/{{site.template.name}}/blocks/footer/boxes/links_box.proc{% endcapture %}
{% capture contacts_box       %}themes/{{site.template.name}}/blocks/footer/boxes/contacts_box.proc{% endcapture %}
{% capture legal_statements   %}themes/{{site.template.name}}/blocks/footer/boxes/legal_statements.proc{% endcapture %}
{% capture issue              %}themes/{{site.template.name}}/blocks/footer/boxes/issue.proc{% endcapture %}
{% capture social_media_icons %}themes/{{site.template.name}}/blocks/footer/boxes/social_media_icons.proc{% endcapture %}


{% comment %} Process YML config data
================================================================================ {% endcomment %}

{% comment %} Set config files
-------------------------------------------------------------------------------- {% endcomment %}
{% assign footer_config_defaults = site.data.blocks.defaults.footer %}
{% assign footer_config_settings = site.data.blocks.footer %}

{% comment %} Set config data
-------------------------------------------------------------------------------- {% endcomment %}
{% assign footer_config_defaults = footer_config_defaults.defaults %}
{% assign footer_config_settings = footer_config_settings.settings %}



{% comment %} Variables
-------------------------------------------------------------------------------- {% endcomment %}

{% comment %} Set HELPER variables
-------------------------------------------------------------------------------- {% endcomment %}
{% capture footer_config_file_name %}~/_data/modules/footer.yml{% endcapture %}


{% comment %} Main
================================================================================ {% endcomment %}
{% for items in footer_config_settings %}
  {% assign key             = items[0] %}
  {% assign value           = items[1] %}
  {% assign footer_config   = value %}

  {% for items in footer_config %}
    {% for footers in items %}

      {% if debug %} footers: {{ footers }} {% endif %}

      {% comment %} parse settings for MAIN keys
      -------------------------------------------------------------------------- {% endcomment %}
      {% for footer in footers %}
        {% assign data_type = footer | is_type %}
        {% if data_type == 'hash' %}
          {% assign footer_settings = footer %}
        {% endif %}
      {% endfor %}

      {% if debug %} <!-- footer_settings.boxes: {{ footer_settings.boxes }} --> {% endif %}


      {% comment %} process current footer
      -------------------------------------------------------------------------- {% endcomment %}
      {% if footer_settings.enabled %}

        {% assign enabled_boxes   = 0 %}
        {% assign footer_options  = footer_config_defaults.footer | merge: footer_settings %}
        {% if debug %} <!-- footer_options: {{ footer_options }} --> {% endif %}

        {% comment %} Calculate number of enabled footer boxes
        ------------------------------------------------------------------------ {% endcomment %}
        {% for property in footer_options.boxes %}
          {% if debug %} <!-- property:  {{property}} --> {% endif %}
          {% if property.enabled %} {% assign enabled_boxes = enabled_boxes | plus:1 %} {% endif %}
        {% endfor %}
        {% assign footer_box_width_md = 12 | divided_by:enabled_boxes %}
        <!-- [INFO   ] [j1.assets.data.footer              ] [Set footer box column width to: {{ footer_box_width_md }}] -->

        <!-- div id="{{footer_config_defaults.container-id}}" class="{{footer_options.theme}}" -->
        <div id="{{footer_config_defaults.container-id}}">
          <div class="footer">

            <div class="container">
              <div class="row">

              {% comment %} Collect footer config data
              ------------------------------------------------------------------ {% endcomment %}
              {% for box in footer_options.boxes %}

                {% comment %} COLLECT|PLACE footer boxes
                ---------------------------------------------------------------- {% endcomment %}
                {% case box.type %}

                {% comment %} PLACE AboutBox
                ---------------------------------------------------------------- {% endcomment %}
                {% when 'about' %}
                  {% if box.enabled %}
                    {% include {{about_box}} title=box.title tagline=box.tagline text=box.text justify=box.justify %}
                  {% endif %}

                  {% comment %} Reset element variable
                  -------------------------------------------------------------- {% endcomment %}
                  {% assign footer_options.boxes = nil %}

                {% comment %} PLACE NewsBox
                ---------------------------------------------------------------- {% endcomment %}
                {% when 'news' %}
                  {% if box.enabled %}
                    {% include {{news_box}} title=box.title tagline=box.tagline category=box.category max_posts=box.max_posts posts=site.posts %}
                  {% endif %}

                  {% comment %} Reset element variable
                  -------------------------------------------------------------- {% endcomment %}
                  {% assign footer_options.boxes = nil %}

                {% comment %} PLACE LinksBox
                --------------------------------------------------------------- {% endcomment %}
                {% when 'references' %}
                  {% if box.enabled %}
                    {% include {{links_box}} title=box.title tagline=box.tagline links=box.links %}
                  {% endif %}

                  {% comment %} Reset element variable
                  -------------------------------------------------------------- {% endcomment %}
                  {% assign footer_options.boxes = nil %}

                {% comment %} PLACE ContactsBox
                --------------------------------------------------------------- {% endcomment %}
                {% when 'contact' %}
                  {% if box.enabled %}
                    {% include {{contacts_box}} %}
                  {% endif %}

                  {% comment %} Reset element variable
                  -------------------------------------------------------------- {% endcomment %}
                  {% assign footer_options.boxes = nil %}

                {% else %}
                  {% comment %} Collect EXCEPTION
                  -------------------------------------------------------------- {% endcomment %}
                  {% unless box.type == 'exception_container' %}
                  <div id="exception_container">
                    <div id="{{panel_settings.id}}" class="container-fluid no-padding">
                      <div class="col-md-12 col-sm-12 col-xs-12 no-padding">
                        <div class="box">
                          <div class="content content-danger">
                            <h2 class="notoc">
                              <i class="mdi mdi-alarm-light mdi-3x mdi-md-red mr-1"></i>
                              panel of type <big>{{panel_settings.type}}</big> not found
                            </h2>
                            <h4 class="notoc box-title">Check your configuration at {{panel_config_file_name}}</h4>
                            <div class="box-description">
                              Don't worry about this. Maybe you've a typo in the panel configuration.
                              Check the panel config file for the unknown type. <br />
                              Check for something wrong like:
                              <div class="mt-2 mb-2">
                                <b>id:       {{panel_settings.id}}</b>  <br />
                                <b>type:     {{panel_settings.type}}</b> <br />
                                <b>comment:  {{panel_settings.comment}}</b>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div> <!-- End panel {{panel_settings.id}} -->
                  </div> <!-- End exception_container -->
                  {% endunless %}

                {% endcase %}

                {% comment %} END footer boxes
                ---------------------------------------------------------------- {% endcomment %}

              {% endfor %}
              </div>
            </div>
          </div>

          {% comment %} COLLECT|PLACE copyright|issue date information
          ---------------------------------------------------------------------- {% endcomment %}
          <div class="copyright">
            <div class="container">
              <div class="row">
                <!-- [INFO   ] [j1.assets.data.footer              ] [Enable horizontal list using id #inline] -->
                <div class="col-md-10" id="inline">
                {% include {{legal_statements}} legals=footer_options.legals %}
                </div>
                <div class="col-md-10" id="inline">
                {% include {{issue}} %}
                </div>
                <div class="col-md-2">
                {% include {{social_media_icons}} icons=footer_options.icons %}
                </div>
              </div>
            </div>
          </div>

        </div>

        {% comment %} Reset element variables (already processed)
        ------------------------------------------------------------------------ {% endcomment %}
        {% assign footer_settings = nil %}

      {% endif %}

    {% endfor %}
  {% endfor %}
{% endfor %}

{% endcapture %}

{{ cache | pretty_print | remove:'<html><body>' | remove:'</body></html>' | strip_empty_lines }}
{% assign cache = nil %}