---
title:                                  Manage Webhooks 
tagline:                                Receive WH notifications from Github
description:                            Manage Webhooks from Github using smee

tags:                                   [ Webhook, Github, Repo, Smee, Jekyll ]
index:                                  []
categories:                             [ pages ]

permalink:                              /pages/private/user_guide/manage_webhook_from_gh/
regenerate:                             false

#resources:                             []
resource_options:
  - toccer:
      collapseDepth:                    2
#  - attic:
#      opacity:                          0.5
#      slides:
#        - url:                          /assets/images/widescreen/featured-1920x800.jpg
#          alt:                          featured-1920x800
---

// Enable the Liquid Preprocessor
//
:page-liquid:

// Set other global page attributes here
// -------------------------------------------------------------------

// See: https://github.com/octokit/webhooks.js/

== Smee

lorem:sentences[3]

lorem:sentences[2]

=== Smee client

[source, bash]
----
smee --help
----

.Output
----
Usage: smee [options]

Options:
  -v, --version           output the version number
  -u, --url <url>         URL of the webhook proxy service.
                          Default: https://smee.io/new
  -t, --target <target>   Full URL (including protocol and path) 
                          of the target service the events will forwarded to. 
                          Default: http://127.0.0.1:PORT/PATH
  -p, --port <n>          Local HTTP server port (default: 3000)
  -P, --path <path>       URL path to post proxied requests to` (default: "/")
  -h, --help              output usage information
----

.Example
[source, bash]
----
smee -u https://smee.io/bzTe8lpQq1KeSJF:3000
----



== Github Webhooks API

GitHub webhook events toolset for Node.js

=== Constructor

[source,js]
----
new WebhooksApi({secret[, path]})
----

[cols=",",]
|===============================================================================
|`secret` _(String)_ 
|*Required.* Secret as configured
in GitHub Settings.

|`transform` _(Function)_ 
|Only relevant for
link:#webhookson[`webhooks.on`]. Transform emitted event before calling
handlers. Can be asynchronous.

|`path` _(String)_ 
|Only relevant for
link:#webhooksmiddleware[`webhooks.middleware`]. Custom path to match
requests against. Defaults to `/`.
|===============================================================================

Returns the `webhooks` API.


=== sign()

[source,js]
----
webhooks.sign(eventPayload)
----

[cols=",",]
|===============================================================================
|`eventPayload` _(Object)_ 
|*Required.* Webhook request
payload as received from GitHub
|===============================================================================


Returns a `signature` string. Throws error if `eventPayload` is not
passed.

Can also be used link:sign/[standalone].

=== verify()

[source,js]
----
webhooks.verify(eventPayload, signature)
----

[cols=",",]
|===============================================================================
|`eventPayload` _(Object)_ 
|*Required.* Webhook event
request payload as received from GitHub.

|`signature` _(String)_ 
|*Required.* Signature string as
calculated by `webhooks.sign()`.
|===============================================================================

Returns `true` or `false`. Throws error if `eventPayload` or `signature`
not passed.

Can also be used link:verify/[standalone].

=== verifyAndReceive()

[source,js]
----
webhooks.verifyAndReceive({id, name, payload, signature})
----

[cols=",",]
|===============================================================================
|`id` _String_ 
|Unique webhook event request id

|`name` _String_ 
|*Required.* Name of the event. (Event
names are set as
https://developer.github.com/webhooks/#delivery-headers[`X-GitHub-Event`
header] in the webhook event request.)

|`payload` _Object_ 
|*Required.* Webhook event request
payload as received from GitHub.

|`signature` _(String)_ 
|*Required.* Signature string as
calculated by `webhooks.sign()`.
|===============================================================================

Returns a promise.

Verifies event using link:#webhooksverify[webhooks.verify()], then
handles the event using link:#webhooksreceive[webhooks.receive()].

Additionally, if verification fails, rejects return promise and emits an
`error` event.

.Example
[source,js]
----
const WebhooksApi = require('@octokit/webhooks')
const webhooks = new WebhooksApi({
  secret: 'mysecret'
})
eventHandler.on('error', handleSignatureVerificationError)

// put this inside your webhooks route handler
eventHandler.verifyAndReceive({
  id: request.headers['x-github-delivery'],
  name: request.headers['x-github-event'],
  payload: request.body,
  signature: request.headers['x-hub-signature']
}).catch(handleErrorsFromHooks)
----

=== receive()

[source,js]
----
webhooks.receive({id, name, payload})
----

[cols=",",]
|===============================================================================
|`id` _String_ 
|Unique webhook event request id

|`name` _String_ 
|*Required.* Name of the event. (Event
names are set as
https://developer.github.com/webhooks/#delivery-headers[`X-GitHub-Event`
header] in the webhook event request.)

|`payload` _Object_ 
|*Required.* Webhook event request
payload as received from GitHub.
|===============================================================================

Returns a promise. Runs all handlers set with
link:#webhookson[`webhooks.on()`] in parallel and waits for them to
finish. If one of the handlers rejects or throws an error, then
`webhooks.receive()` rejects. The returned error has an `.errors`
property which holds an array of all errors caught from the handlers. If
no errors occur, `webhooks.receive()` resolves without passing any
value.

The `.receive()` method belongs to the link:receiver/[receiver] module
which can be used standalone.

=== on()

[source,js]
----
webhooks.on(eventName, handler)
webhooks.on(eventNames, handler)
----

[cols=",",]
|===============================================================================
|`eventName` _String_ 
|*Required.* Name of the event.
One of link:#listofalleventnames[GitHubÔÇÖs supported event names].

|`eventNames` _Array_ 
|*Required.* Array of event names.

|`handler` _Function_ 
|*Required.* Method to be run each
time the event with the passed name is received. the `handler` function
can be an async function, throw an error or return a Promise. The
handler is called with an event object: `{id, name, payload}`.
|===============================================================================


The `.on()` method belongs to the link:receiver/[receiver] module which
can be used standalone.

=== removeListener()

[source,js]
----
webhooks.removeListener(eventName, handler)
webhooks.removeListener(eventNames, handler)
----

[cols=",",]
|===============================================================================
|`eventName` _String_ 
|*Required.* Name of the event.
One of link:#listofalleventnames[GitHubÔÇÖs supported event names].

|`eventNames` _Array_ 
|*Required.* Array of event names.

|`handler` _Function_ 
|*Required.* Method which was
previously passed to `webhooks.on()`. If the same handler was registered
multiple times for the same event, only the most recent handler gets
removed.
|===============================================================================

The `.removeListener()` method belongs to the link:receiver/[receiver]
module which can be used standalone.

=== middleware()

[source,js]
----
webhooks.middleware(request, response[, next])
----

[cols=",",]
|===============================================================================
|`request` _Object_ 
|*Required.* A Node.js
https://nodejs.org/docs/latest/api/http.html#http_class_http_clientrequest[http.ClientRequest].

|`response` _Object_ 
|*Required.* A Node.js
https://nodejs.org/docs/latest/api/http.html#http_class_http_serverresponse[http.ServerResponse].

|`next` _Function_ 
|Optional function which invokes the
next middleware, as used by
https://github.com/senchalabs/connect[Connect] and
http://expressjs.com/[Express].
|===============================================================================


Returns a `requestListener` (or _middleware_) method which can be
directly passed to
https://nodejs.org/docs/latest/api/http.html#http_http_createserver_requestlistener[`http.createServer()`],
Express and other compatible Node.js server frameworks.

Can also be used link:middleware/[standalone].

=== Webhook events

See the full list of
https://developer.github.com/v3/activity/events/types/[event types with
example payloads].

If there are actions for a webhook, events are emitted for both, the
webhook name as well as a combination of the webhook name and the
action, e.g. `installation` and `installation.created`.


[cols=",",options="header",]
|===============================================================================
|Event |Actions

|https://developer.github.com/v3/activity/events/types/#checkrunevent[`check_run`]
|`completed`, 
`created`, 
`requested_action`, 
`rerequested`

|https://developer.github.com/v3/activity/events/types/#checksuiteevent[`check_suite`]
|`completed`, 
`requested`, 
`rerequested`

|https://developer.github.com/v3/activity/events/types/#commitcommentevent[`commit_comment`]
|`created`

|https://developer.github.com/v3/activity/events/types/#contentreferenceevent[`content_reference`]
|

|https://developer.github.com/v3/activity/events/types/#createevent[`create`]
|

|https://developer.github.com/v3/activity/events/types/#deleteevent[`delete`]
|

|https://developer.github.com/v3/activity/events/types/#deploykeyevent[`deploy_key`]
|`created`, 
`deleted`

|https://developer.github.com/v3/activity/events/types/#deploymentevent[`deployment`]
|

|https://developer.github.com/v3/activity/events/types/#deploymentstatusevent[`deployment_status`]
|

|https://developer.github.com/v3/activity/events/types/#forkevent[`fork`]
|

|https://developer.github.com/v3/activity/events/types/#githubappauthorizationevent[`github_app_authorization`]
|

|https://developer.github.com/v3/activity/events/types/#gollumevent[`gollum`]
|

|https://developer.github.com/v3/activity/events/types/#installationevent[`installation`]
|`created`, 
`deleted`, 
`new_permissions_accepted`

|https://developer.github.com/v3/activity/events/types/#installationrepositoriesevent[`installation_repositories`]
|`added`, 
`removed`

|https://developer.github.com/v3/activity/events/types/#issuecommentevent[`issue_comment`]
|`created`, 
`deleted`, 
`edited`

|https://developer.github.com/v3/activity/events/types/#issuesevent[`issues`]
|`assigned`, 
`closed`, 
`deleted`, 
`demilestoned`, 
`edited`, 
`labeled`, 
`locked`, 
`milestoned`, 
`opened`, 
`pinned`, 
`reopened`, 
`transferred`, 
`unassigned`, 
`unlabeled`, 
`unlocked`, 
`unpinned`

|https://developer.github.com/v3/activity/events/types/#labelevent[`label`]
|`created`, 
`deleted`, 
`edited`

|https://developer.github.com/v3/activity/events/types/#marketplacepurchaseevent[`marketplace_purchase`]
|`cancelled`, 
`changed`, 
`pending_change`, 
`pending_change_cancelled`, 
`purchased`

|https://developer.github.com/v3/activity/events/types/#memberevent[`member`]
|`added`, 
`deleted`, 
`edited`

|https://developer.github.com/v3/activity/events/types/#membershipevent[`membership`]
|`added`, 
`removed`

|https://developer.github.com/v3/activity/events/types/#metaevent[`meta`]
|`deleted`

|https://developer.github.com/v3/activity/events/types/#milestoneevent[`milestone`]
|`closed`, 
`created`, 
`deleted`, 
`edited`, 
`opened`

|https://developer.github.com/v3/activity/events/types/#organizationevent[`organization`]
|`deleted`, 
`member_added`, 
`member_invited`, 
`member_removed`, 
`renamed`

|https://developer.github.com/v3/activity/events/types/#orgblockevent[`org_block`]
|`blocked`, 
`unblocked`

|https://developer.github.com/v3/activity/events/types/#pagebuildevent[`page_build`]
|

|https://developer.github.com/v3/activity/events/types/#projectcardevent[`project_card`]
|`converted`, 
`created`, 
`deleted`, 
`edited`, 
`moved`

|https://developer.github.com/v3/activity/events/types/#projectcolumnevent[`project_column`]
|`created`, 
`deleted`, 
`edited`, 
`moved`

|https://developer.github.com/v3/activity/events/types/#projectevent[`project`]
|`closed`, 
`created`, 
`deleted`, 
`edited`, 
`reopened`

|https://developer.github.com/v3/activity/events/types/#publicevent[`public`]
|

|https://developer.github.com/v3/activity/events/types/#pullrequestevent[`pull_request`]
|`assigned`, 
`closed`, 
`edited`, 
`labeled`, 
`locked`, 
`opened`, 
`ready_for_review`, 
`reopened`, 
`review_request_removed`, 
`review_requested`, 
`unassigned`, 
`unlabeled`, 
`unlocked`, 
`synchronize`

|https://developer.github.com/v3/activity/events/types/#pullrequestreviewevent[`pull_request_review`]
|`dismissed`, 
`edited`, 
`submitted`

|https://developer.github.com/v3/activity/events/types/#pullrequestreviewcommentevent[`pull_request_review_comment`]
|`created`, 
`deleted`, 
`edited`

|https://developer.github.com/v3/activity/events/types/#pushevent[`push`]
|

|https://developer.github.com/v3/activity/events/types/#releaseevent[`release`]
|`created`, 
`deleted`, 
`edited`, 
`prereleased`, 
`published`, 
`unpublished`

|https://developer.github.com/v3/activity/events/types/#repositoryevent[`repository`]
|`archived`, 
`created`, 
`deleted`, 
`edited`, 
`privatized`, 
`publicized`, 
`renamed`, 
`transferred`, 
`unarchived`

|https://developer.github.com/v3/activity/events/types/#repositoryimportevent[`repository_import`]
|

|https://developer.github.com/v3/activity/events/types/#repositoryvulnerabilityalertevent[`repository_vulnerability_alert`]
|`create`, 
`dismiss`, 
`resolve`

|https://developer.github.com/v3/activity/events/types/#securityadvisoryevent[`security_advisory`]
|`performed`, 
`published`, 
`updated`

|https://developer.github.com/v3/activity/events/types/#starevent[`star`]
|`created`, 
`deleted`

|https://developer.github.com/v3/activity/events/types/#statusevent[`status`]
|

|https://developer.github.com/v3/activity/events/types/#teamevent[`team`]
|`added_to_repository`, 
`created`, 
`deleted`, 
`edited`, 
`removed_from_repository`

|https://developer.github.com/v3/activity/events/types/#teamaddevent[`team_add`]
|

|https://developer.github.com/v3/activity/events/types/#watchevent[`watch`]
|`started`

|https://developer.github.com/v3/activity/events/types/#pingevent[`ping`]
|
|===============================================================================



== Run Chrome unsecure

lorem:sentences[3]

lorem:sentences[2]

.Example
[source, bash]
----
"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" ^
  –-allow-file-access-from-files ^
  --disable-web-security ^
  --user-data-dir ^
  --disable-features=CrossSiteDocumentBlockingIfIsolating
----

